!function(r){function n(r){return r}function e(r,n){for(var e=0,t=n.length,u=new Array(t);e<t;++e)u[e]=r[n[e]];return u}function t(r){function n(n,e,t,u){for(;t<u;){var f=t+u>>>1;e<r(n[f])?u=f:t=f+1}return t}return n.right=n,n.left=function(n,e,t,u){for(;t<u;){var f=t+u>>>1;r(n[f])<e?t=f+1:u=f}return t},n}function u(r){function n(r,n,t){for(var u=t-n,f=1+(u>>>1);--f>0;)e(r,f,u,n);return r}function e(n,e,t,u){for(var f,o=n[--u+e],i=r(o);(f=e<<1)<=t&&(f<t&&r(n[u+f])>r(n[u+f+1])&&f++,!(i<=r(n[u+f])));)n[u+e]=n[u+f],e=f;n[u+e]=o}return n.sort=function(r,n,t){for(var u,f=t-n;--f>0;)u=r[n],r[n]=r[n+f],r[n+f]=u,e(r,1,f,n);return r},n}function f(r){var n=u(r);return function(e,t,u,f){var o,i,a,c=new Array(f=Math.min(u-t,f));for(i=0;i<f;++i)c[i]=e[t++];if(n(c,0,f),t<u){o=r(c[0]);do{r(a=e[t])>o&&(c[0]=a,o=r(n(c,0,f)[0]))}while(++t<u)}return c}}function o(r){return function(n,e,t){for(var u=e+1;u<t;++u){for(var f=u,o=n[u],i=r(o);f>e&&r(n[f-1])>i;--f)n[f]=n[f-1];n[f]=o}return n}}function i(r){function n(r,n,u){return(u-n<k?t:e)(r,n,u)}function e(e,t,u){var f,o=(u-t)/6|0,i=t+o,a=u-1-o,c=t+u-1>>1,l=c-o,v=c+o,s=e[i],h=r(s),d=e[l],p=r(d),g=e[c],y=r(g),w=e[v],x=r(w),b=e[a],m=r(b);h>p&&(f=s,s=d,d=f,f=h,h=p,p=f),x>m&&(f=w,w=b,b=f,f=x,x=m,m=f),h>y&&(f=s,s=g,g=f,f=h,h=y,y=f),p>y&&(f=d,d=g,g=f,f=p,p=y,y=f),h>x&&(f=s,s=w,w=f,f=h,h=x,x=f),y>x&&(f=g,g=w,w=f,f=y,y=x,x=f),p>m&&(f=d,d=b,b=f,f=p,p=m,m=f),p>y&&(f=d,d=g,g=f,f=p,p=y,y=f),x>m&&(f=w,w=b,b=f,f=x,x=m,m=f);var A=d,k=p,O=w,E=x;e[i]=s,e[l]=e[t],e[c]=g,e[v]=e[u-1],e[a]=b;var M=t+1,U=u-2,z=k<=E&&k>=E;if(z)for(S=M;S<=U;++S){q=e[S];if((F=r(q))<k)S!==M&&(e[S]=e[M],e[M]=q),++M;else if(F>k)for(;;){if(!((C=r(e[U]))>k)){if(C<k){e[S]=e[M],e[M++]=e[U],e[U--]=q;break}e[S]=e[U],e[U--]=q;break}U--}}else for(S=M;S<=U;S++){q=e[S];if((F=r(q))<k)S!==M&&(e[S]=e[M],e[M]=q),++M;else if(F>E)for(;;){if(!((C=r(e[U]))>E)){C<k?(e[S]=e[M],e[M++]=e[U],e[U--]=q):(e[S]=e[U],e[U--]=q);break}if(--U<S)break}}if(e[t]=e[M-1],e[M-1]=A,e[u-1]=e[U+1],e[U+1]=O,n(e,t,M-1),n(e,U+2,u),z)return e;if(M<i&&U>a){for(var N,C;(N=r(e[M]))<=k&&N>=k;)++M;for(;(C=r(e[U]))<=E&&C>=E;)--U;for(var S=M;S<=U;S++){var q=e[S],F=r(q);if(F<=k&&F>=k)S!==M&&(e[S]=e[M],e[M]=q),M++;else if(F<=E&&F>=E)for(;;){if(!((C=r(e[U]))<=E&&C>=E)){C<k?(e[S]=e[M],e[M++]=e[U],e[U--]=q):(e[S]=e[U],e[U--]=q);break}if(--U<S)break}}}return n(e,M,U+1)}var t=o(r);return n}function a(r){for(var n=new Array(r),e=-1;++e<r;)n[e]=0;return n}function c(r,n){return function(e){var t=e.length;return[r.left(e,n,0,t),r.right(e,n,0,t)]}}function l(r,n){var e=n[0],t=n[1];return function(n){var u=n.length;return[r.left(n,e,0,u),r.left(n,t,0,u)]}}function v(r){return[0,r.length]}function s(){return null}function h(){return 0}function d(r){return r+1}function p(r){return r-1}function g(r){return function(n,e){return n+ +r(e)}}function y(r){return function(n,e){return n-r(e)}}function w(){function r(r){var n=a,e=r.length;return e&&(o=o.concat(r),E=U(E,a+=e),N.forEach(function(t){t(r,n,e)})),t}var t={add:r,remove:function(){for(var r=x(a,a),n=[],e=0,t=0;e<a;++e)E[e]?r[e]=t++:n.push(e);M.forEach(function(r){r(0,[],n)}),C.forEach(function(n){n(r)});for(var u,e=0,t=0;e<a;++e)(u=E[e])&&(e!==t&&(E[t]=u,o[t]=o[e]),++t);for(o.length=t;a>t;)E[--a]=0},dimension:function(r){function t(n,t,u){K=n.map(r),L=W(b(u),0,u),K=e(K,L);var f,o=X(K),i=o[0],c=o[1];if(P)for(f=0;f<u;++f)P(K[f],f)||(E[L[f]+t]|=T);else{for(f=0;f<i;++f)E[L[f]+t]|=T;for(f=c;f<u;++f)E[L[f]+t]|=T}if(!t)return I=K,J=L,$=i,void(_=c);var l=I,v=J,s=0,h=0;for(I=new Array(a),J=x(a,a),f=0;s<t&&h<u;++f)l[s]<K[h]?(I[f]=l[s],J[f]=v[s++]):(I[f]=K[h],J[f]=L[h++]+t);for(;s<t;++s,++f)I[f]=l[s],J[f]=v[s];for(;h<u;++h,++f)I[f]=K[h],J[f]=L[h]+t;o=X(I),$=o[0],_=o[1]}function O(r,n,e){Y.forEach(function(r){r(K,L,n,e)}),K=L=null}function S(r){for(var n,e=0,t=0;e<a;++e)E[n=J[e]]&&(e!==t&&(I[t]=I[e]),J[t]=r[n],++t);for(I.length=t;t<a;)J[t++]=0;var u=X(I);$=u[0],_=u[1]}function q(r){var n=r[0],e=r[1];if(P)return P=null,D(function(r,t){return n<=t&&t<e}),$=n,_=e,Q;var t,u,f,o=[],i=[];if(n<$)for(t=n,u=Math.min($,e);t<u;++t)E[f=J[t]]^=T,o.push(f);else if(n>$)for(t=$,u=Math.min(n,_);t<u;++t)E[f=J[t]]^=T,i.push(f);if(e>_)for(t=Math.max(n,_),u=e;t<u;++t)E[f=J[t]]^=T,o.push(f);else if(e<_)for(t=Math.max($,e),u=_;t<u;++t)E[f=J[t]]^=T,i.push(f);return $=n,_=e,M.forEach(function(r){r(T,o,i)}),Q}function F(r){return q((X=c(A,r))(I))}function R(r){return q((X=l(A,r))(I))}function j(){return q((X=v)(I))}function B(r){return X=v,D(P=r),$=0,_=a,Q}function D(r){var n,e,t,u=[],f=[];for(n=0;n<a;++n)!(E[e=J[n]]&T)^!!(t=r(I[n],n))&&(t?(E[e]&=V,u.push(e)):(E[e]|=T,f.push(e)));M.forEach(function(r){r(T,u,f)})}function G(r){function e(n,e,t,u){function f(){++K===H&&(A=z(A,G<<=1),q=z(q,G),H=m(G))}var h,d,p,g,y,w,b=S,A=x(K,H),k=j,O=D,N=K,C=0,F=0;for(Q&&(k=O=s),S=new Array(K),K=0,q=N>1?U(q,a):x(a,H),N&&(p=(d=b[0]).key);F<u&&!((g=r(n[F]))>=g);)++F;for(;F<u;){for(d&&p<=g?(y=d,w=p,A[C]=K,(d=b[++C])&&(p=d.key)):(y={key:g,value:O()},w=g),S[K]=y;!(g>w||(q[h=e[F]+t]=K,E[h]&V||(y.value=k(y.value,o[h])),++F>=u));)g=r(n[F]);f()}for(;C<N;)S[A[C]=K]=b[C++],f();if(K>C)for(C=0;C<t;++C)q[C]=A[q[C]];h=M.indexOf(L),K>1?(L=i,P=l):(!K&&W&&(K=1,S=[{key:null,value:O()}]),1===K?(L=c,P=v):(L=s,P=s),q=null),M[h]=L}function t(){if(K>1){for(var r=K,n=S,e=x(r,r),t=0,u=0;t<a;++t)E[t]&&(e[q[u]=q[t]]=1,++u);for(S=[],K=0,t=0;t<r;++t)e[t]&&(e[t]=K++,S.push(n[t]));if(K>1)for(t=0;t<u;++t)q[t]=e[q[t]];else q=null;M[M.indexOf(L)]=K>1?(P=l,L=i):1===K?(P=v,L=c):P=L=s}else if(1===K){if(W)return;for(t=0;t<a;++t)if(E[t])return;S=[],K=0,M[M.indexOf(L)]=L=P=s}}function i(r,n,e){if(r!==T&&!Q){var t,u,f,i;for(t=0,f=n.length;t<f;++t)E[u=n[t]]&V||((i=S[q[u]]).value=j(i.value,o[u]));for(t=0,f=e.length;t<f;++t)(E[u=e[t]]&V)===r&&((i=S[q[u]]).value=B(i.value,o[u]))}}function c(r,n,e){if(r!==T&&!Q){var t,u,f,i=S[0];for(t=0,f=n.length;t<f;++t)E[u=n[t]]&V||(i.value=j(i.value,o[u]));for(t=0,f=e.length;t<f;++t)(E[u=e[t]]&V)===r&&(i.value=B(i.value,o[u]))}}function l(){var r,n;for(r=0;r<K;++r)S[r].value=D();for(r=0;r<a;++r)E[r]&V||((n=S[q[r]]).value=j(n.value,o[r]))}function v(){var r,n=S[0];for(n.value=D(),r=0;r<a;++r)E[r]&V||(n.value=j(n.value,o[r]))}function w(){return Q&&(P(),Q=!1),S}function b(r,n,e){return j=r,B=n,D=e,Q=!0,N}function A(){return b(d,p,h)}function k(r){function n(n){return r(n.value)}return F=f(n),R=u(n),N}function O(){var r=M.indexOf(L);return r>=0&&M.splice(r,1),(r=Y.indexOf(e))>=0&&Y.splice(r,1),(r=C.indexOf(t))>=0&&C.splice(r,1),N}var N={top:function(r){var n=F(w(),0,S.length,r);return R.sort(n,0,n.length)},all:w,reduce:b,reduceCount:A,reduceSum:function(r){return b(g(r),y(r),h)},order:k,orderNatural:function(){return k(n)},size:function(){return K},dispose:O,remove:O};Z.push(N);var S,q,F,R,j,B,D,G=8,H=m(G),K=0,L=s,P=s,Q=!0,W=r===s;return arguments.length<1&&(r=n),M.push(L),Y.push(e),C.push(t),e(I,J,0,a),A().orderNatural()}function H(){Z.forEach(function(r){r.dispose()});var r=N.indexOf(t);return r>=0&&N.splice(r,1),(r=N.indexOf(O))>=0&&N.splice(r,1),(r=C.indexOf(S))>=0&&C.splice(r,1),w&=V,j()}var I,J,K,L,P,Q={filter:function(r){return null==r?j():Array.isArray(r)?R(r):"function"==typeof r?B(r):F(r)},filterExact:F,filterRange:R,filterFunction:B,filterAll:j,top:function(r){for(var n,e=[],t=_;--t>=$&&r>0;)E[n=J[t]]||(e.push(o[n]),--r);return e},bottom:function(r){for(var n,e=[],t=$;t<_&&r>0;)E[n=J[t]]||(e.push(o[n]),--r),t++;return e},group:G,groupAll:function(){var r=G(s),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r},dispose:H,remove:H},T=~w&-~w,V=~T,W=i(function(r){return K[r]}),X=v,Y=[],Z=[],$=0,_=0;return N.unshift(t),N.push(O),C.push(S),w|=T,(k>=32?!T:w&-(1<<k))&&(E=z(E,k<<=1)),t(o,0,a),O(o,0,a),Q},groupAll:function(){function r(r,n){var e;if(!w)for(e=n;e<a;++e)E[e]||(i=c(i,o[e]))}function n(r,n,e){var t,u,f;if(!w){for(t=0,f=n.length;t<f;++t)E[u=n[t]]||(i=c(i,o[u]));for(t=0,f=e.length;t<f;++t)E[u=e[t]]===r&&(i=l(i,o[u]))}}function e(){var r;for(i=v(),r=0;r<a;++r)E[r]||(i=c(i,o[r]))}function t(r,n,e){return c=r,l=n,v=e,w=!0,s}function u(){return t(d,p,h)}function f(){var e=M.indexOf(n);return e>=0&&M.splice(e),(e=N.indexOf(r))>=0&&N.splice(e),s}var i,c,l,v,s={reduce:t,reduceCount:u,reduceSum:function(r){return t(g(r),y(r),h)},value:function(){return w&&(e(),w=!1),i},dispose:f,remove:f},w=!0;return M.push(n),N.push(r),r(o,0,a),u()},size:function(){return a}},o=[],a=0,w=0,k=8,E=O(0),M=[],N=[],C=[];return arguments.length?r(arguments[0]):t}function x(r,n){return(n<257?O:n<65537?E:M)(r)}function b(r){for(var n=x(r,r),e=-1;++e<r;)n[e]=e;return n}function m(r){return 8===r?256:16===r?65536:4294967296}w.version="1.3.14",w.permute=e;var A=w.bisect=t(n);A.by=t,(w.heap=u(n)).by=u,(w.heapselect=f(n)).by=f,(w.insertionsort=o(n)).by=o,(w.quicksort=i(n)).by=i;var k=32,O=a,E=a,M=a,U=function(r,n){for(var e=r.length;e<n;)r[e++]=0;return r},z=function(r,n){if(n>32)throw new Error("invalid array width!");return r};"undefined"!=typeof Uint8Array&&(O=function(r){return new Uint8Array(r)},E=function(r){return new Uint16Array(r)},M=function(r){return new Uint32Array(r)},U=function(r,n){if(r.length>=n)return r;var e=new r.constructor(n);return e.set(r),e},z=function(r,n){var e;switch(n){case 16:e=E(r.length);break;case 32:e=M(r.length);break;default:throw new Error("invalid array width!")}return e.set(r),e}),r.crossfilter=w}("undefined"!=typeof exports&&exports||this);